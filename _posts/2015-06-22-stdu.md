---
layout:     post
title:      使用protoc导出Lua消息 
date:       2015-06-22 13:50:42
summary:    如何使用protocbuff导出Lua消息?
categories: jekyll-pixyll
---

1.首先安装protocbuff,百度一下(谷歌被关在墙外... ^.^)
这是一个学习笔记,最近急用,有时间的话再做编辑.

####windows 控制台    
    protoc foo.proto --lua_out=#输出路径 生成xx_pd.lua  

####proto类代码    
    message foo  
    {  
	  required int32 id = 1;  
	  required string name = 2;  
	  optional string email = 3;  
	}  

  
####在Lua里的使用方法  
    require "foo_pb"    
    -- 创建一个lua消息包    
    local msg = foo_pb.foo()    
    msg.id = 100    
    msg.name = "foo"    
    msg.email = "bar"    
    local pb_data = msg:SerializeToString()    
  
####解析方法  
    -- 解析示例    
    local msg = foo_pb.foo()  
    msg:ParseFromString(pb_data)  
    print(msg.id, msg.name, msg.email)  
